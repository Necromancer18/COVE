<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coffee Menu</title>
<link rel="stylesheet" href="../css/coffee.css">
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
<style>

</style>
</head>
<body>

<a href="category.html" class="back-btn">← Back to Categories</a>
<h1>Coffee Menu</h1>

<div class="menu-container">
    <div class="item">
        <img src="../image/americano.jfif" alt="Americano">
        <h3>Americano</h3>
        <p>₱75</p>
        <div class="qty-box">
            <button class="qty-btn" onclick="decrement('qty-americano')">−</button>
            <input type="number" class="qty-input" id="qty-americano" value="1" min="1">
            <button class="qty-btn" onclick="increment('qty-americano')">+</button>
        </div>
        <button class="add-btn" onclick="addToCart('Americano',75,'qty-americano')">Add</button>
    </div>

    <div class="item">
        <img src="../image/cappuccino.jfif" alt="Americano">
        <h3>Cappuccino</h3>
        <p>₱90</p>
        <div class="qty-box">
            <button class="qty-btn" onclick="decrement('qty-cappuccino')">−</button>
            <input type="number" class="qty-input" id="qty-cappuccino" value="1" min="1">
            <button class="qty-btn" onclick="increment('qty-cappuccino')">+</button>
        </div>
        <button class="add-btn" onclick="addToCart('Cappuccino',90,'qty-cappuccino')">Add</button>
    </div>

    <div class="item">
        <img src="../image/caramel.jfif" alt="Americano">
        <h3>Caramel Macchiato</h3>
        <p>₱120</p>
        <div class="qty-box">
            <button class="qty-btn" onclick="decrement('qty-caramel')">−</button>
            <input type="number" class="qty-input" id="qty-caramel" value="1" min="1">
            <button class="qty-btn" onclick="increment('qty-caramel')">+</button>
        </div>
        <button class="add-btn" onclick="addToCart('Caramel Macchiato',120,'qty-caramel')">Add</button>
    </div>

    <div class="item">
        <img src="../image/iced latte.jfif" alt="Americano">
        <h3>Iced Latte</h3>
        <p>₱110</p>
        <div class="qty-box">
            <button class="qty-btn" onclick="decrement('qty-icedlatte')">−</button>
            <input type="number" class="qty-input" id="qty-icedlatte" value="1" min="1">
            <button class="qty-btn" onclick="increment('qty-icedlatte')">+</button>
        </div>
        <button class="add-btn" onclick="addToCart('Iced Latte',110,'qty-icedlatte')">Add</button>
    </div>
</div>

<!-- Queue Modal -->
<div id="queueModal" class="modal">
    <div class="modal-content">
        <h2>Order Queue #<span id="queue-number"></span></h2>
        <ul id="queue-items"></ul>
        <button onclick="closeQueue()">Exit</button>
    </div>
</div>

<script>
// Quantity increment/decrement
function increment(id){
    let input = document.getElementById(id);
    input.value = parseInt(input.value) + 1;
}
function decrement(id){
    let input = document.getElementById(id);
    if(parseInt(input.value) > 0){
        input.value = parseInt(input.value) - 1;
    }
}

// Add to cart
function addToCart(name, price, qtyId) {
    let qty = parseInt(document.getElementById(qtyId).value);
    if(qty < 1) qty = 1;
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let existing = cart.find(i => i.name === name);
    if(existing) existing.quantity += qty;
    else cart.push({name: name, price: price, quantity: qty});
    localStorage.setItem("cart", JSON.stringify(cart));
    alert(`${name} x${qty} added to cart!`);
}

// Checkout / Queue modal
function checkout() {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    if(cart.length === 0) { alert("Cart is empty!"); return; }
    let orders = JSON.parse(localStorage.getItem("orders")) || [];
    let nextQueue = orders.length + 1;
    let order = { queue: nextQueue, items: cart, date: new Date().toLocaleString() };
    orders.push(order);
    localStorage.setItem("orders", JSON.stringify(orders));
    localStorage.removeItem("cart");

    document.getElementById('queue-number').textContent = nextQueue;
    document.getElementById('queue-items').innerHTML = cart.map(i => `<li>${i.name} x ${i.quantity}</li>`).join('');
    document.getElementById('queueModal').style.display = 'block';
}

function closeQueue() { document.getElementById('queueModal').style.display = 'none'; }
window.onclick = function(event) {
    let queueModal = document.getElementById('queueModal');
    if(event.target == queueModal) queueModal.style.display = "none";
}
</script>

</body>
</html>
